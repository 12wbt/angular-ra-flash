"use strict";angular.module("ra.flash",["ra.flash.directives","ra.flash.services"]),angular.module("ra.flash.directives",["ra.flash.services"]).directive("flash",["$injector","$timeout","$interpolate","Flash",function(a,b,c,d){var e=a.has&&a.has("$sceDelegate"),f="ng-bind-html-unsafe",g="ng-show";e&&(f="ng-bind-html",g="ng-if");var h='<div class="alert" ng-show="show" ng-class="flash.classes"><button ng-show="flash.close" type="button" class="close" ng-click="show = false">Ã—</button><span '+g+'="!flash.trust_as" ng-bind="flash.message"></span><span '+g+'="flash.trust_as" '+f+'="flash.message_html"></span></div>';return{restrict:"EA",replace:!0,scope:!0,template:h,link:function(f){f.init=function(){f.flash_service=d,f.$watch("flash_service.active",f.active)},f.active=function(){if(f.flash=f.flash_service.active,f.flash){if(f.show=!0,f.flash.type&&0!==f.flash.type.indexOf("alert-")&&(f.flash.type="alert-"+f.flash.type),angular.isString(f.flash.message)&&(f.flash.message=c(f.flash.message)(f)),"html"===f.flash.trust_as)if(e){var d=a.get("$sceDelegate");f.flash.message_html=d.trustAs(f.flash.trust_as,f.flash.message)}else f.flash.message_html=f.flash.message;if(f.flash.auto_hide){var g=1e3*(angular.isNumber(f.flash.auto_hide)?f.flash.auto_hide:10);b(function(){f.flash_service.hide(),f.show=!1},g)}var h=[f.flash.type];f.flash.close&&h.push("alert-dismissable"),f.flash.classes=h.join(" ")}else f.show=!1},f.init()}}}]),angular.module("ra.flash.services",[]).run(["$rootScope","Flash",function(a,b){a.$on("$routeChangeSuccess",function(){b.showOnNextPage()})}]).factory("Flash",function(){function a(a){return function(c,e){"error"===a&&(a="danger");var f={type:a,message:c};return f.show=function(){b.show(this)},f.hide=function(){b.hide()},f.nextPage=function(){b.show(this,{next_page:!0})},angular.extend({},d,f,e)}}var b={},c=["generic","success","info","warning","danger","error"],d={close:!0,trust_as:!1,auto_hide:!1,next_page:!1};return angular.forEach(c,function(c){b[c]=a(c)}),b.show=function(a,b){a=angular.extend({},a,b),a.next_page===!0?this.next_page=a:this.active=a},b.hide=function(){this.active=null},b.showOnNextPage=function(){this.next_page?(this.active=this.next_page,this.active.next_page=!1,this.next_page=!1):this.hide()},b});