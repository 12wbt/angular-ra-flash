"use strict";angular.module("ra.flash",["ra.flash.directives","ra.flash.services"]),angular.module("ra.flash.directives",["ra.flash.services"]).directive("flash",["$injector","$timeout","Flash",function(a,b,c){return{restrict:"EA",replace:!0,scope:!0,template:'<div class="alert" ng-show="show" ng-class="flash.type"><button ng-show="flash.close" type="button" class="close" data-dismiss="alert">Ã—</button><span ng-hide="flash.trust_as" ng-bind="flash.message"></span><span ng-show="flash.trust_as" ng-bind-html="flash.message" ng-bind-html-unsafe="flash.message"></span></div>',link:function(d){d.init=function(){d.flash_service=c,d.$watch("flash_service.active",d.active)},d.active=function(){if(d.flash=d.flash_service.active,d.flash){if(d.show=!0,d.flash.type&&0!==d.flash.type.indexOf("alert-")&&(d.flash.type="alert-"+d.flash.type),d.flash.trust_as)if(a.has&&a.has("$sceDelegate")){var c=a.get("$sceDelegate");d.flash.message_html=c.trustAs(d.flash.trust_as,d.flash.message)}else d.flash.message_html=d.flash.message;if(d.flash.auto_hide){var e=1e3*(angular.isNumber(d.flash.auto_hide)?d.flash.auto_hide:10);b(function(){d.flash_service.hide(),d.show=!1},e)}}else d.show=!1},d.init()}}}]),angular.module("ra.flash.services",[]).run(["$rootScope","Flash",function(a,b){a.$on("$routeChangeSuccess",function(){b.showOnNextPage()})}]).factory("Flash",function(){function a(a){return function(c,e){"error"===a&&(a="danger");var f={type:a,message:c};return f.show=function(){b.show(this)},f.hide=function(){b.hide()},angular.extend({},d,f,e)}}var b={},c=["generic","success","info","warning","danger","error"],d={close:!0,trust_as:!1,auto_hide:!1,next_page:!1};return angular.forEach(c,function(c){b[c]=a(c)}),b.show=function(a){this.active=angular.extend({},a)},b.hide=function(){this.active=null},b.showOnNextPage=function(){this.active&&this.active.next_page===!0?this.active.next_page=!1:b.hide()},b});