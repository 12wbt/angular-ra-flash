"use strict";angular.module("ra.flash",["ra.flash.directives","ra.flash.services"]),angular.module("ra.flash.directives",["ra.flash.services"]).directive("flash",["$injector","$timeout","Flash",function(a,b,c){var d=a.has&&a.has("$sceDelegate"),e="ng-bind-html-unsafe",f="ng-hide";d&&(e="ng-bind-html",f="ng-if");var g='<div class="alert" ng-show="show" ng-class="flash.classes"><button ng-show="flash.close" type="button" class="close" data-dismiss="alert">Ã—</button><span '+f+'="flash.trust_as" ng-bind="flash.message"></span>'+"<span "+f+'="!flash.trust_as" '+e+'="flash.message_html"></span>'+"</div>";return{restrict:"EA",replace:!0,scope:!0,template:g,link:function(e){e.init=function(){e.flash_service=c,e.$watch("flash_service.active",e.active)},e.active=function(){if(e.flash=e.flash_service.active,e.flash){if(e.show=!0,e.flash.type&&0!==e.flash.type.indexOf("alert-")&&(e.flash.type="alert-"+e.flash.type),"html"===e.flash.trust_as)if(d){var c=a.get("$sceDelegate");e.flash.message_html=c.trustAs(e.flash.trust_as,e.flash.message)}else e.flash.message_html=e.flash.message;if(e.flash.auto_hide){var f=1e3*(angular.isNumber(e.flash.auto_hide)?e.flash.auto_hide:10);b(function(){e.flash_service.hide(),e.show=!1},f)}var g=[e.flash.type];e.flash.close&&g.push("alert-dismissable"),e.flash.classes=g.join(" ")}else e.show=!1},e.init()}}}]),angular.module("ra.flash.services",[]).run(["$rootScope","Flash",function(a,b){a.$on("$routeChangeSuccess",function(){b.showOnNextPage()})}]).factory("Flash",function(){function a(a){return function(c,e){"error"===a&&(a="danger");var f={type:a,message:c};return f.show=function(){b.show(this)},f.hide=function(){b.hide()},f.nextPage=function(){b.show(this,{next_page:!0})},angular.extend({},d,f,e)}}var b={},c=["generic","success","info","warning","danger","error"],d={close:!0,trust_as:!1,auto_hide:!1,next_page:!1};return angular.forEach(c,function(c){b[c]=a(c)}),b.show=function(a,b){a=angular.extend({},a,b),a.next_page===!0?this.next_page=a:this.active=a},b.hide=function(){this.active=null},b.showOnNextPage=function(){this.next_page?(this.active=this.next_page,this.active.next_page=!1,this.next_page=!1):this.hide()},b});